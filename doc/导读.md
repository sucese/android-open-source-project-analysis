# å¯¼è¯»

**å…³äºä½œè€…**

>éƒ­å­æ˜Ÿï¼Œç¨‹åºå‘˜ï¼Œå‰ä»–æ‰‹ï¼Œä¸»è¦ä»äº‹Androidå¹³å°åŸºç¡€æ¶æ„æ–¹é¢çš„å·¥ä½œï¼Œæ¬¢è¿äº¤æµæŠ€æœ¯æ–¹é¢çš„é—®é¢˜ï¼Œå¯ä»¥å»æˆ‘çš„[Github](https://github.com/guoxiaoxing)æissueæˆ–è€…å‘é‚®ä»¶è‡³guoxiaoxingse@163.comä¸æˆ‘äº¤æµã€‚

**æ–‡ç« ç›®å½•**

- ä¸€ åŸºç¡€ç¯‡
- äºŒ å·¥å…·ç¯‡
- ä¸‰ ä¹¦ç±ç¯‡
- äºŒ æºç ç¯‡

ç¬¬ä¸€æ¬¡é˜…è§ˆæœ¬ç³»åˆ—æ–‡ç« ï¼Œè¯·å‚è§[å¯¼è¯»](https://github.com/guoxiaoxing/android-open-source-project-analysis/blob/master/doc/å¯¼è¯».md)ï¼Œæ›´å¤šæ–‡ç« è¯·å‚è§[æ–‡ç« ç›®å½•](https://github.com/guoxiaoxing/android-open-source-project-analysis/blob/master/README.md)ã€‚

æœ¬ç¯‡æ–‡ç« æ˜¯æœ¬ç³»åˆ—æ–‡ç« çš„å¯¼è¯»æ–‡ç« ï¼Œå¼ºçƒˆå»ºè®®ç¬¬ä¸€æ¬¡é˜…è¯»æœ¬ç³»åˆ—æœ¬ç« çš„åŒå­¦å…ˆçœ‹ä¸€ä¸‹å¯¼è¯»çš„å†…å®¹ï¼Œå®ƒä¼šå‘Šè¯‰ä½ æ–‡ç« ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›å·¥å…·ï¼Œä»¥åŠç‰µæ‰¯åˆ°å“ªäº›ç†è®ºçŸ¥è¯†è¿™äº›å†…
å®¹ä¼šå¸®åŠ©ä½ æ›´å¿«æ›´å¥½åœ°å»ç†è§£æ–‡ç« å†…å®¹ã€‚

## ä¸€ åŸºç¡€ç¯‡

åœ¨é˜…è¯» AOSPï¼ˆAndroid Open Source Projecï¼‰ä¹‹å‰ä½ éœ€è¦æŒæ¡çš„ä»¥ä¸‹ç†è®ºçŸ¥è¯†ã€‚

- Javaï¼šAOSPçš„ä¸»è¦è¯­è¨€ï¼Œå½“ç„¶æ˜¯åº”è¯¥æŒæ¡çš„ã€‚
- Linuxï¼šAndroidæ˜¯åŸºäºLinuxå†…æ ¸å¼€å‘çš„ï¼Œå¦‚ä½•ä½ éœ€è¦æ¶‰åŠåˆ°å†…æ ¸æˆ–è€…é©±åŠ¨çš„å¼€å‘ï¼Œä½ éœ€è¦æŒæ¡Linuxç›¸å…³æŠ€æœ¯ã€‚
- Makeï¼šAOSPæ˜¯ç”¨Makeæ¥ç¼–è¯‘çš„ï¼Œå› æ­¤è¦äº†è§£å¸¸ç”¨çš„Makeè¯­æ³•ã€‚
- Gitï¼šç¨‹åºå‘˜å¿…å¤‡æŠ€èƒ½ã€‚
- C++ï¼šAOSPä¸€äº›æ€§èƒ½æ•æ„Ÿçš„æ¨¡å—åº•å±‚éƒ½æ˜¯ç”±C++å®Œæˆçš„ï¼Œå½“ç„¶å¦‚æœä½ å¦‚æœä¸éœ€è¦å…³æ³¨åº•å±‚å®ç°ï¼Œä¹Ÿå¯ä»¥è·³è¿‡è¿™ä¸€æ®µï¼Œå¯ä»¥æ›´å¤šçš„å»å…³æ³¨æ¡†æ¶å±‚ã€‚
- è®¾è®¡æ¨¡å¼ï¼šAOSPé‡Œå¤§é‡çš„æ¡†æ¶éƒ½æ˜¯ç”¨äº†è°‹è€…è®¾è®¡æ¨¡å¼ï¼Œæ¯”æ–¹è¯´è§‚å¯Ÿè€…æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€å¤åˆæ¨¡å¼ç­‰ï¼Œå¦‚æœå¯¹è®¾è®¡æ¨¡å¼ä¸å¤Ÿäº†è§£çš„ä¼šçœ‹çš„äº‘é‡Œé›¾é‡Œã€‚
- ç†Ÿç»ƒçš„Android Appå¼€å‘æŠ€èƒ½

## äºŒ å·¥å…·ç¯‡

æœ¬ç³»åˆ—çš„æ–‡ç« åŸºäºçš„ç¯å¢ƒæ˜¯MacOSï¼Œä½†æ˜¯æ‰€ä½¿ç”¨çš„å·¥å…·è½¯ä»¶å¤šæ•°éƒ½æ˜¯è·¨å¹³å°çš„ï¼Œæ‰€ä»¥å¯¹å…¶ä»–å¹³å°çš„å°ä¼™ä¼´ä¹Ÿæ²¡æœ‰å½±å“ã€‚

### ä»£ç é˜…è¯»

>å¦‚æœåœ¨Windowsä¸‹ç›´æ¥ä¸ŠSourceInsight å°±å¯ä»¥äº†ï¼ŒMacä¸‹å¯ä»¥ç”¨Understandï¼ŒåŠŸèƒ½å’ŒSourceInsightä¸€æ ·å¼ºå¤§ã€‚

[Understand 4.0.849 ä»£ç é˜…è¯»åˆ†æè½¯ä»¶](http://xclient.info/s/understand.html)

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/understand.png"/>

### æ¼”ç¤ºæ–‡ç¨¿

>æ¼”ç¤ºæ–‡ç¨¿æ˜¯ç”¨Keynoteæ¥åšçš„ã€‚

[Keynote](http://xclient.info/s/keynote.html)

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/keynote.png"/>

### æ–‡ç« å†™ä½œ

>æ–‡ç« éƒ½æ˜¯ç”¨Markdownæ¥å†™çš„ï¼Œå·¥å…·ç”¨çš„æ˜¯MWebï¼Œä¸€æ¬¾å¾ˆå¼ºå¤§çš„Markdownç¼–è¾‘å·¥å…·ã€‚

[MWeb for Mac](http://www.mweb.im/)

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/nweb_for_mac.png"/>

### å›¾ä¾‹ç»˜åˆ¶

>æµç¨‹å›¾ã€ç±»å›¾ã€æ—¶åºå›¾ã€ç³»ç»Ÿæ¶æ„å›¾ç­‰å„ç§å›¾ä¾‹é‡‡ç”¨EdrawMaxæ¥ç»˜åˆ¶ï¼ŒVisioä¹Ÿæ¯”è¾ƒå¥½ç”¨ï¼Œå¯æƒœMacä¸‹æ²¡æœ‰ã€‚

[EdrawMax](http://xclient.info/s/edraw-max.html)

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/EdrawMax.png"/>

### å›¾ç‰‡å¤„ç†

>Gifå›¾çš„åˆ¶ä½œç”¨çš„æ˜¯VideoGIFã€‚

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/VideoGIF.png"/>

[VideoGIF](http://xclient.info/s/videogif.html)

### å›¾ç‰‡é˜…è§ˆ

>æœ¬ç³»åˆ—çš„æ–‡å­—ä¼šæ¶‰åŠå„ç§æ—¶åºå›¾ã€UMLå›¾ã€ç³»ç»Ÿç»“æ„å›¾ç­‰ï¼Œè¿™äº›å›¾ç‰‡æœ‰æ—¶å€™ä¼šå¾ˆå¤§ï¼Œä¸ºäº†è¯»è€…èƒ½æ›´åŠ æ¸…æ™°çš„é˜…è§ˆï¼Œç¬”è€…ä¸ä»…æä¾›äº†pngæ ¼å¼çš„å›¾ç‰‡ï¼Œè¿˜
æä¾›äº†å‹ç¼©æ›´å¥½çš„svgï¼ˆå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼‰æ ¼å¼ï¼Œè¯¥ç§æ ¼å¼ç”¨xmlè¯­è¨€æ¥æè¿°å›¾ç‰‡ä¿¡æ¯ï¼Œåœ¨macä¸‹å¯ç”¨Gapplinæ‰“å¼€ã€‚

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/Gapplin.png"/>

[Gapplin](https://itunes.apple.com/cn/app/gapplin/id768053424?mt=12&ign-mpt=uo%3D4)

## ä¸‰ ä¹¦ç±ç¯‡

ç«™åœ¨å‰è¾ˆçš„è‚©è†€ä¸Šï¼Œæˆ‘ä»¬èƒ½çœ‹çš„æ›´è¿œï¼Œè¿›æ­¥çš„æ›´å¿«ã€‚ä»¥ä¸‹æ˜¯å­¦ä¹ æ¡†æ¶ä¸æºç ä¸€äº›ä¸é”™çš„ä¹¦ç±ã€‚

[Android æºç è®¾è®¡æ¨¡å¼è§£æä¸å®æˆ˜](https://item.jd.com/11793928.html)ï¼šä½•çº¢è¾‰ï¼Œå…³çˆ±æ°‘ è‘—

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/android_source_code_design_pattern.png"/>

[Androidç³»ç»Ÿæºä»£ç æƒ…æ™¯åˆ†æ](https://item.jd.com/11838754.html)ï¼šç½—å‡é˜³ è‘—

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/android_source_code_scenario_analysis.png"/>

[Androidå¼€å‘è‰ºæœ¯æ¢ç´¢](https://item.jd.com/11760209.html)ï¼šä»»ç‰åˆš è‘—

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/android_develop_art_explore.png"/>

æœ¬ç³»åˆ—æ–‡ç« ä¹Ÿæä¾›äº†ä¸€äº›ç»å…¸çš„ä¹¦ç±èµ„æº

http://pan.baidu.com/share/link?shareid=1026404461&uk=3444638282

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/android_book.png"/>

å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯å…¨éƒ¨çš„åŸºç¡€ã€å·¥å…·ä¸ä¹¦ç±ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰ä¸‹è½½Androidæºç ï¼Œç°åœ¨æˆ‘ä»¬å°±å»ä¸‹è½½å§ã€‚

## å›› æºç ç¯‡

### 4.1 æºç ä¸‹è½½

å®˜æ–¹åœ°å€ï¼šhttps://source.android.com/index.html  

æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼šhttps://mirror.tuna.tsinghua.edu.cn/help/AOSP/  

**æºç ç‰ˆæœ¬**

[android-7.1.1_r1](https://source.android.com/source/build-numbers.html#source-code-tags-and-builds)

**ç”µè„‘ç¯å¢ƒ**

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/mac_os.png" width="700" height=""/>

#### 1 åˆ›å»ºåŒºåˆ†å¤§å°å†™ç£ç›˜

æ‰“å¼€ç£ç›˜å·¥å…·

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/disk_tool_1.png" width="700" height=""/>

åˆ›å»ºç©ºç™½æ˜ åƒ

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/disk_tool_2.png" width="700" height=""/>

è®¾ç½®åŒºåˆ†å¤§å°å†™

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/disk_tool_3.png" width="700" height=""/>

#### 2 ä¸‹è½½repoå·¥å…·

```
mkdir ~/bin
PATH=~/bin:$PATH
curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
chmod a+x ~/bin/repo
```

å¦‚æœä½ æ²¡æœ‰ç¿»å¢™ï¼Œå¯ä»¥ä½¿ç”¨æ¸…åå¤§å­¦çš„repoé•œåƒï¼šhttps://mirrors.tuna.tsinghua.edu.cn/help/git-repo/

ä¸‹è½½å®Œæˆåå°†bin/repoæ‰“å¼€ï¼Œå°†é‡Œé¢çš„REPO_URLæ”¹æˆæ¸…åå¤§å­¦çš„é•œåƒï¼š

```
https://mirrors.tuna.tsinghua.edu.cn/git/git-repo/'
```

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/repo_download_1.png" width="700" height=""/>

#### 3 ä¸‹è½½æºç 

1 å»ºç«‹å·¥ä½œç›®å½•

```
mkdir WORKING_DIRECTORY
cd WORKING_DIRECTORY
```

```
$ git config --global user.text "Your Name"
$ git config --global user.email "you@example.com"
```

2 åˆå§‹åŒ–ä»“åº“

```
repo init -u https://aosp.tuna.tsinghua.edu.cn/platform/manifest
```

å¦‚æœéœ€è¦æŸä¸ªç‰¹å®šçš„Androidç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨åé¢æŒ‡å®šç‰ˆæœ¬å·ã€‚

Androidç³»ç»Ÿå„ç‰ˆæœ¬å·ï¼šhttps://source.android.com/source/build-numbers.html#source-code-tags-and-builds

```
repo init -u https://aosp.tuna.tsinghua.edu.cn/platform/manifest -b android-7.1.1_r28
```

æ³¨ï¼šæ›´å¤šæºç ç‰ˆæœ¬å¯ä»¥å‚è§https://source.android.com/source/build-numbers

åŒæ­¥æºç æ ‘ï¼Œå¼€å§‹ä¸‹è½½æºç ï¼Œå¦‚æœåç»­ä¸‹è½½ä¸­æ–­ï¼Œä¹Ÿå¯ä»¥é‡å¤æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚

```
repo sync
```

æºç çš„ä¸‹è½½ä¼šç»å¸¸ä¸­æ–­ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªè„šæœ¬è‡ªåŠ¨repo syncï¼Œä¿å­˜æˆrepo.shï¼Œæ”¾åˆ°WORKING_DIRECTORYç›®å½•ä¸‹

```
#!/bin/bash   
#FileName  jkYishon.sh  
PATH=~/bin:$PATH   
repo init -u https://aosp.tuna.tsinghua.edu.cn/platform/manifest -b android-7.1.1_r28
repo sync   
while [ $? = 1 ]; do   
echo "================sync failed, re-sync again ====="   
sleep 3   
repo sync   
done
```

é…ç½®å¯æ‰§è¡Œæƒé™ï¼Œè¿è¡Œå³å¯ã€‚

```
chmod 777 repo.sh
./repo.sh
```

å¼€å§‹ä¸‹è½½

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/repo_download_2.png" width="700" height=""/>

ä¸‹è½½å®Œæˆ

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/repo_download_3.png" width="700" height=""/>

æºç ç›®å½•

<img src="https://github.com/guoxiaoxing/android-open-source-project-analysis/raw/master/art/base/1/repo_download_4.png" width="700" height=""/>

æˆ‘ä¸‹è½½çš„æ˜¯android-7.1.1_r28ç‰ˆæœ¬çš„æºç ï¼Œä¸€å…±160Gå·¦å³ï¼ŒğŸ˜¤å…‰æºç éƒ½è¿™ä¹ˆå¤§ï¼ŒçœŸæ˜¯ä¸ªæµ©å¤§çš„å·¥ç¨‹ã€‚